<!DOCTYPE html>
<html>
  <head>
    <title>Freelancer</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body>
    <% if notice %>
    <p class="alert alert-success"><%= notice %></p>
    <% end %>
    <% if alert %>
      <p class="alert alert-danger"><%= alert %></p>
    <% end %>
    <%= render partial: 'shared/nav' %>
    <%= yield %>
    <!-- Place this script at the end of your HTML file, just before the closing </body> tag -->

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.querySelector('[aria-controls="mobile-menu"]');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton.addEventListener('click', () => {
    const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true' || false;
    mobileMenuButton.setAttribute('aria-expanded', !expanded);
    mobileMenu.classList.toggle('hidden', expanded);
  });

  // User menu dropdown
  const userMenuButton = document.getElementById('user-menu-button');
  const userMenu = document.querySelector('[role="menu"]');

  userMenuButton.addEventListener('click', () => {
    const expanded = userMenuButton.getAttribute('aria-expanded') === 'true' || false;
    userMenuButton.setAttribute('aria-expanded', !expanded);
    userMenu.classList.toggle('hidden', expanded);
  });

  // Close the user menu dropdown when clicking outside of it
  document.addEventListener('click', (event) => {
    const isInsideUserMenu = userMenuButton.contains(event.target) || userMenu.contains(event.target);
    if (!isInsideUserMenu) {
      userMenu.classList.add('hidden');
      userMenuButton.setAttribute('aria-expanded', 'false');
    }
  });
</script>

  </body>
</html>
